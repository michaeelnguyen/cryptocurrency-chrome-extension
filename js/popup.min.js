function filter(){var e,t,a,n;for(e=document.getElementById("search").value.toUpperCase(),t=document.getElementById("currency_table").getElementsByTagName("tr"),n=0;n<t.length;n++)(a=t[n].getElementsByTagName("td")[1])&&(a.innerHTML.toUpperCase().indexOf(e)>-1?t[n].style.display="":t[n].style.display="none")}function sendDataReq(){$.getJSON("https://api.coinmarketcap.com/v1/ticker/?limit=50",function(e){fillTable(e)})}function fillTable(e){for(var t in e)if(e.hasOwnProperty(t)){var a="",n=e[t].price_usd,d=parseFloat(e[t].percent_change_1h).toFixed(2),r=parseFloat(e[t].percent_change_24h).toFixed(2),o=e[t].price_usd.split(".");if(o[0].length>=1&&"0"!=o[0]){var l=(n=parseFloat(parseFloat(e[t].price_usd).toFixed(2)).toLocaleString("en")).split(".");l[1]&&1==l[1].length&&(n+="0")}a+="<tr>",a+="<td>"+(parseInt(t)+1)+"</td>",a+="<td>"+e[t].name+" ("+e[t].symbol+")</td>",a+="<td>$"+n+"</td>",parseFloat(d)>=0?a+='<td id="green">'+d+"%</td>":parseFloat(d)<0?a+='<td id="red">'+d+"%</td>":a+="<td>N/A</td>",parseFloat(r)>=0?a+='<td id="green">'+r+"%</td>":parseFloat(r)<0?a+='<td id="red">'+r+"%</td>":a+="<td>N/A</td>",a+="</tr>",$("#table_body").append(a)}}function updateData(){$("#table_body tr").remove(),sendDataReq(),chrome.alarms.clear("updateInfo"),window.location.href="popup.html"}document.addEventListener("DOMContentLoaded",function(){sendDataReq(),document.getElementById("search")&&addEventListener("keyup",filter),chrome.alarms.create("updateInfo",{periodInMinutes:5}),chrome.alarms.onAlarm.addListener(function(e){"updateInfo"===e.name&&updateData()})}),function(e,t,a,n,d,r,o){e.GoogleAnalyticsObject=d,e[d]=e[d]||function(){(e[d].q=e[d].q||[]).push(arguments)},e[d].l=1*new Date,r=t.createElement(a),o=t.getElementsByTagName(a)[0],r.async=1,r.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(r,o)}(window,document,"script",0,"ga"),ga("create","UA-112302940-1","auto"),ga("send","pageview","/popup.html");